#include<iostream>
#include<cstring>
#include<cstdio>

using namespace std;

struct TetInfo
{
    int blocks[5][8][16] = 
    {
        {
            {
                1,1,1,1,
                0,0,0,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                1,0,0,0,
                1,0,0,0,
                1,0,0,0,
                1,0,0,0
            }
        },

        {
            {
                1,1,0,0,
                1,1,0,0,
                0,0,0,0,
                0,0,0,0
            }
        },

        {
            {
                1,0,0,0,
                1,0,0,0,
                1,1,0,0,
                0,0,0,0
            },
            {
                1,1,1,0,
                1,0,0,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                1,1,0,0,
                0,1,0,0,
                0,1,0,0,
                0,0,0,0
            },
            {
                0,0,1,0,
                1,1,1,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                0,1,0,0,
                0,1,0,0,
                1,1,0,0,
                0,0,0,0
            },
            {
                1,0,0,0,
                1,1,1,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                1,1,0,0,
                1,0,0,0,
                1,0,0,0,
                0,0,0,0
            },
            {
                1,1,1,0,
                0,0,1,0,
                0,0,0,0,
                0,0,0,0
            }
        },
        {
            {
                1,0,0,0,
                1,1,0,0,
                0,1,0,0,
                0,0,0,0
            },
            {
                0,1,1,0,
                1,1,0,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                0,1,0,0,
                1,1,0,0,
                1,0,0,0,
                0,0,0,0,
            },
            {
                1,1,0,0,
                0,1,1,0,
                0,0,0,0,
                0,0,0,0
            }
        },
        {
            {
                0,1,0,0,
                1,1,0,0,
                0,1,0,0,
                0,0,0,0
            },
            {
                1,1,1,0,
                0,1,0,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                0,1,0,0,
                1,1,1,0,
                0,0,0,0,
                0,0,0,0
            },
            {
                1,0,0,0,
                1,1,0,0,
                1,0,0,0,
                0,0,0,0
            }
        }
    };
    int blockNum[5] = {2,1,8,4,4};
    int map[503][503];

    int n, m;
    void init()
    {
        memset(map,0,sizeof(map));
        scanf("%d %d\n", &n, &m);
        for(int i = 0; i < n; i++)
            for(int j = 0; j < m; j++)
                scanf("%d", &map[i][j]);
    }

    int getMax()
    {
        int max = -1;
        for(int r = 0 ; r < n; r++)
        {
            for(int c = 0 ; c < m ; c++)
            {
                for(int i = 0; i < 5; i++)
                {
                    for(int j = 0; j < blockNum[i]; j++)
                    {
                        int sum = 0;
                        for(int row = 0; row < 4; row++)
                        {
                            for(int col = 0; col < 4; col++)
                            {
                                sum = blocks[i][j][row*4+col] ? sum + map[r+row][c+col] : sum;
                            }
                        }
                        max = max < sum ? sum : max;
                    }
                }
            }
        }

        return max;
    }
} info;

int main()
{
    info.init();
    int res = info.getMax();
    printf("%d\n", res);
    return 0;
}