# 따라하며 배우는 도커와 CI환경 인프런 강의

- [git 주소 참고](https://github.com/jaewonhimnae/docker-codes)

## 4월 17일 ~ 23일 강의 수강, 정리 예정

- 실습과 전반적인 흐름을 이해할 예정

## 다음 책을 참고하면서 도커와 쿠버네티스를 추가적 실습할 예정

- 15단계로 배우는 도커와 쿠버네티스

## 도커 기본

## 1. 1. 도커를 쓰는 이유

- 결론적으로 어떠한 프로그램을 다운받는 과정에서 굉장히 간단하게 만들기 위해서

- 레디스 설치 하는 것으로 시작

- 실제 리눅스에 깔기 위해서 실행환경을 갖춰야되기 때문에 에러를 먼저 만남eh

- 하지만 도커는 docker run -it redis으로 끝남

## 1. 2. 도커란 무엇인가?

- 컨테이너를 사용하여 응용프로그램을 더 쉽게만들고 배포하고 실행할수 있도록 설계한 도구이며 컨테이너 기반의 오픈소스 가상화 플랫폼이다.

## 1. 3. 도커이미지와 도커 컨테이너 정의

- 컨테이너는 코드와 모든 조옥성을 패키지화하여 응용 프로그램이 컴퓨팅 환경에서 다른 컴퓨팅환경으로 빠르고 안정적으로 실행되도록하는 소프트웨어의 표준이다.

- 컨테이너 이미지는 코드, 런타임, 시스템 도구, 시스테 라이브러리 및 설정과 같은 응용 프로그램을 실행하는데 필요한 모든것을 포함하는 가볍고 독립적이며 실행가능한 소프트웨어 패키지임

- 컨테이너 이미지는 런타임에 컨테이너가 되고 도커 컨테이너의 경우 도커 엔진에서 실행될때 이미지가 컨테이너가 된다. (이미지는 종속성, 컨테이너의 인스턴스)

1. 먼저 도커 CLI에서 커맨드를 입력한다

2. 도커 서버(도커 데몬)이 그 커멘드를 받아서 그것에 따라 이미지를 생성하든 컨테이너를 싱행하든 모든 작업을 하게 된다.

- 도커 client(CLI) - 도커 Server (Daemon)

- docker run hello-world

- 컴퓨터 도커 클라이언트 -> 도커서버 -> hello-world 이미지가 있나요?

- -> 도커허브 (이미지들을 보관) <-hello-world 

## 1. 4. 도커와 기존 가상화 기술과의 차이를 통한 컨테이너 이해

1. 가상화 기술이 나오기 전

- 한대의 서버를 하나의 용도로만이 사용 

- 남는 공간 그대로 방치

- 하나의 서버에 하나의 운영체제, 하나의 프로그램만을 운영 안정적 but 비효율적

2. 하이퍼바이저 기반의 가상화 출현

- 논리적으로 공간을 분할하여 VM이라는 독립적인 가상환경 서버 이용가능

- 하이퍼바이저는 호스트 시스템에서 다수의 OS를 구동할수 있게하는 소프트웨어

- 하드웨어를 가상화하면서 하드웨어와 각각의 VM을 모니터링하는 중간관리자임.

- 네이티브 하이퍼바이저 - 하드웨어 -> 하이퍼바이저 -> OS

- 호스트형 하이퍼바이저 - 하드웨어->OS ->하이퍼바이저 ->OS

- 도커 컨테이너와 가상기술이랑 공통점, 차이점

- 공통점 :기본 하드웨어에서 격리된 환경 내에 어플리케이션을 배치하는 방법

- 차이점 : 얼마나 격리시키는지 차이점

- 가상화기술 (VM)은 게스트 OS가 있어 무거움, 도커는 없어서 가벼움

- 컨테이너 : 카카오톡 -> 커널 ->하드디스크 CPU, 네트워크 , RAM

## 1.5. 이미지로 컨테이너 만들기

- 이미지는 응용 프로그램을 실행하는데 필요한 모든것을 포함하고 있음

- 그러면 뭐가 필요하지?

1.  컨테이너가 시작될때 실행되는 명령어 ex) run kakaotalk

2. 파일 스냅샷 ex)컨테이너에서 카카오톡을 싱행하고 싶다면 카카오톡 스냅샷

* 파일 스냅샷은 디렉토리나 파일을 카피한것

3. 이미지에서 가지고있는 명령어를 사용해서 카카오톡을 실행시켜줌

- 이미지로 컨테이너 만드는 순서

1. 도커 클라이언트에서 docker run <이미지> 입력해줌

## 6. C-group, 네임스페이스를 도커환경에서 쓸 수 있는 이유

- 컨테이너를 격리 시킬수있는 이유는 C Group과 네임스페이스를 이용해서이다.

- 하지만 생각해보면 Cgroup과 네임스페이스는 리눅스 환경에서 사용되어지는 것인데..

- docker version (내부적으로 리눅스)

- 왜? 프로그램 -> 리눅스커널 -> 리눅스VM -> 맥OS/윈도우OS->하드웨어